[{"content":"この記事について しばらく前に会社の計算サーバーでVSCode×conda×rmd/qmdの環境を試行錯誤して構築することができた。\n作っただけで満足してしまってその後はjupyter notebookしか使わないという暴挙にでてしまっていたが、これからはquarto活用を推進していこうという気になったので、改めて環境を見直した。\nこの記事を読んでできるようになること VSCode-R(REditorSupport)を介してrmd/qmdのチャンクをインタラクティブモードで実行する際、指定したconda環境を使うようになります。 また、ターミナルにはradianが使用されるようになります。 誰向けか Rのバージョンを使い分けたい人 Rのバージョン管理にcondaを使っている人 わけあってRのアップデートを気軽にはできない場合1 方法 クレジット 最初に、この解決法を知るに至った、神的なGitHub issueをクレジットしておきたい。\n自分はこちらのイシュー(Rとradianをconda環境指定しつつvscode-Rで使うにはどうしたら良いか)についていたelsherbiniさんのスクリプトで成功した。\n最小構成のconda環境 まず環境を作る。これさえあればとりあえずはvscodeでの解析環境が作れる。\n1mamba create -n r42 \u0026#34;r-base==4.2\u0026#34; 2# 完了後 3mamba activate r42 4mamba install radian radianを使う気が無いなら省略してもOK。\nもしjupyter Notebook環境も作りたいなら、以下のものも用意しておく。\n1mamba install r-irkernel jupyterlab conda-forgeレポジトリにはRパッケージも存在しており、コマンドライン上でパッケージをインストールすることは可能だ。\nしかし、この後インストールが必須なlanguageserverをcondaでインストールしてしまうと、依存関係の設定ミスにより強制的にR4.1にダウングレードされてしまうので注意が必要だ。 基本的にRのパッケージはR内でインストールする方が良さそうだ。\n1radian 1R version 4.2.1 (2022-06-23) -- \u0026#34;Funny-Looking Kid\u0026#34; 2Platform: x86_64-pc-linux-gnu (64-bit) 3 4R\u0026gt; install.packages(\u0026#34;languageserver\u0026#34;) 最低限必要なパッケージはこのlanguageserverパッケージだけ。\n起動用シェルスクリプトを作成 Windowsだとps1ファイルか何かを使うのだと思うが、Linux/Mac環境しか試してないので不明。\n以下の内容を適当な場所へ保存。ファイル名は何でも良い。\n$HOME/.config/R/vscode-r-conda.sh 1#!/bin/bash 2 3# conda環境名はここで指定する 4 5R_ENV=r42 6 7\\_\\_conda_setup=\u0026#34;![(\\\u0026#39;](https://latex.codecogs.com/svg.latex?%28%27 \u0026#34;(\u0026#39;\u0026#34;)HOME/mambaforge/bin/conda\u0026#39; \u0026#39;shell.zsh\u0026#39; \u0026#39;hook\u0026#39; 2\\\u0026gt; /dev/null)\u0026#34; 8if \\[ ![? -eq 0 \\]; then eval \\\u0026#34;](https://latex.codecogs.com/svg.latex?%3F%20-eq%200%20%5D%3B%20then%20%20eval%20%22 \u0026#34;? -eq 0 ]; then eval \u0026#34;\u0026#34;)\\_\\_conda_setup\u0026#34; 9else 10if \\[ -f \u0026#34;![HOME/mambaforge/etc/profile.d/conda.sh\\\u0026#34; \\]; then . \\\u0026#34;](https://latex.codecogs.com/svg.latex?HOME%2Fmambaforge%2Fetc%2Fprofile.d%2Fconda.sh%22%20%5D%3B%20then%20%20.%20%22 \u0026#34;HOME/mambaforge/etc/profile.d/conda.sh\u0026#34; ]; then . \u0026#34;\u0026#34;)HOME/mambaforge/etc/profile.d/conda.sh\u0026#34; 11else 12export PATH=\u0026#34;![HOME/mambaforge/bin:](https://latex.codecogs.com/svg.latex?HOME%2Fmambaforge%2Fbin%3A \u0026#34;HOME/mambaforge/bin:\u0026#34;)PATH\u0026#34; 13fi 14fi 15unset \\_\\_conda_setup 16 17if \\[ -f \u0026#34;![HOME/mambaforge/etc/profile.d/mamba.sh\\\u0026#34; \\]; then . \\\u0026#34;](https://latex.codecogs.com/svg.latex?HOME%2Fmambaforge%2Fetc%2Fprofile.d%2Fmamba.sh%22%20%5D%3B%20then%20%20.%20%22 \u0026#34;HOME/mambaforge/etc/profile.d/mamba.sh\u0026#34; ]; then . \u0026#34;\u0026#34;)HOME/mambaforge/etc/profile.d/mamba.sh\u0026#34; 18fi 19 20mamba deactivate \u0026amp;\u0026amp; mamba activate \\$R_ENV 21 22radian 一応実行可能になってるか確認する。\n1chmod +x /home/snitch/.config/R/vscode-r-conda.sh 2/home/snitch/.config/R/vscode-r-conda.sh 正常にconda環境のRがradianで立ち上がればOK。\nVSCodeに登録 最後にVSCodeの登録をする。\n作業完了、実行確認 ここまでやれば、conda環境がVSCodeの実行環境になったはず。このqmdファイルで実行できるか試してみる。\n1plot(iris) バッチリ✴️\nもしもバージョン変更をしたくなったら、conda環境を作り直してからシェルスクリプトの仮想環境名を変更するだけで良いので、超簡単。\n自分の場合は数十人で使っている共有サーバーなので二三年に一度しかアプデできないし、LinuxのOS的な問題でRバージョンを上げられないという悲しい状況です。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2022-09-22T00:00:00Z","permalink":"https://snitch0.github.io/p/r-vscode-conda/","title":"VSCodeでconda環境のRをradianとともに使う"},{"content":"LinterとFormatterにも色々あることを知る 先日Twitterを徘徊していたら、ruffというrust製のpython linterのレポジトリを発見した。試しに使ってみたら本当に爆速で驚き😲\nで、自分はVSCodeユーザーなので、どうやったらVSCodeのlinterとしてruffを使えるのだろうと思ったら現時点では対応してないみたいだった。詳しいことはよく分からないが、どうやらVSCodeのpython拡張側での対応が必要らしく、少なくともVSCode python拡張のメンテナが実装することはないらしい。\n残念だなぁと思ったが、実際VSCode公式のpylint以外の選択肢についてあんまり知らなかったので調べてみることに。\n現在サポートされているlinter Command palletteから「Python: リンターを選択」を実行したとき、bandit、flake8、mypy、prospector、pycodestyle、pydocstyle、py lama、pylintの8つが選択可能だった。\n違いは以下の記事がとても参考になった。\nlinter flake8 + mypy が自分的には必須かなと思った。\nflake8はざっと見た感じ、コーディング規約を必要十分な感じに網羅していると思った。 mypyは型チェックするのに必須。\nでもせっかく調べたので、banditも入れてみた。セキュリティを気をつけ無きゃいけない機会は仕事上ほとんどないけど。\nformatter 現状あまり選択肢があるわけではないが、blackが割と厳しめでよさそう。\n使ってみたら一行あたりの文字数制限がblackとflake8で食い違ってしまったので、flake8の実行オプションを設定してやる必要があるのと、エディタの縦線の位置をずらしてあげる。\n1{ 2 \u0026#34;python.linting.flake8Enabled\u0026#34;: true, 3 \u0026#34;python.linting.flake8Args\u0026#34;: [ 4 \u0026#34;--max-line-length\u0026#34;, \u0026#34;88\u0026#34;, \u0026#34;--ignore=E203,W503,W504\u0026#34; 5 ], 6} コレに関しては以下の記事を参考にさせていただいた。\n完成品 結局あれこれいじってこうなった。\nWSL2の設定ファイルなのでスリムだが、気づけばpython系とneovim系ぐらいしか設定してないのか。\n1 2{ 3 \u0026#34;python.linting.flake8Enabled\u0026#34;: true, 4 \u0026#34;python.linting.flake8Args\u0026#34;: [ 5 \u0026#34;--max-line-length\u0026#34;, \u0026#34;88\u0026#34;, \u0026#34;--ignore=E203,W503,W504\u0026#34; 6 ], 7 \u0026#34;python.linting.mypyEnabled\u0026#34;: true, 8 \u0026#34;python.languageServer\u0026#34;: \u0026#34;Pylance\u0026#34;, 9 \u0026#34;python.analysis.completeFunctionParens\u0026#34;: true, 10 \u0026#34;python.analysis.logLevel\u0026#34;: \u0026#34;Warning\u0026#34;, 11 \u0026#34;python.linting.banditEnabled\u0026#34;: true, 12 \u0026#34;python.testing.pytestEnabled\u0026#34;: true, 13 \u0026#34;[python]\u0026#34;: { 14 \u0026#34;editor.defaultFormatter\u0026#34;: null, 15 \u0026#34;editor.formatOnSave\u0026#34;: true 16 }, 17 \u0026#34;python.formatting.provider\u0026#34;: \u0026#34;black\u0026#34;, 18 \u0026#34;python.analysis.typeCheckingMode\u0026#34;: \u0026#34;basic\u0026#34;, 19 \u0026#34;vscode-neovim.mouseSelectionStartVisualMode\u0026#34;: false, 20 \u0026#34;vscode-neovim.neovimInitVimPaths.linux\u0026#34;: \u0026#34;~/.config/nvim/init.lua\u0026#34;, 21 \u0026#34;editor.lineNumbers\u0026#34;: \u0026#34;relative\u0026#34;, 22} ","date":"2022-09-21T00:00:00Z","permalink":"https://snitch0.github.io/p/python-linter-formatter/","title":"Pythonのlinterとformatter事情(@VisualStudioCode)"},{"content":"書籍 データ分析のための数理モデル入門　本質をとらえた分析のために[ 江崎貴裕 ] リンク\n⭐⭐⭐⭐(星4)\nソシム社のデータ分析シリーズの一冊目。めちゃくちゃTwitter上で評判が良かったので気にはなっていたが、youtubeでとても勉強させてもらっているアイシア・ソリッドさん(のマスター)がシリーズ4冊目をこの頃出版されたということなので、Kindleセールにてまとめ買いをした。 めっちゃわかりやすい説明をしてくれるアイシアさんがシリーズ全作オススメされているので、きっと参考になるだろうと思いつつ、Amazonレビューもそれなりに高く、読む前の期待値としては高め。\n結論から言うと、データ分析に少なからず関わる機会がある初学者にはとてもお勧め。よく使う統計手法には慣れている中級者以上でも、視野を広げたいのならとてもお勧め。 数式的な理解がないと満足出来ない人にはお勧めできない。なぜなら本書では数式が全くといって良いほど出てこないから。\nタイトル通り本書は数式モデルについて解説しているが、多項式モデルや一般線形モデルに限らず、統計モデルや確率モデルにもしっかり触れられており、最後には時系列モデルや機械学習モデルにも触れられている。難解な数式はほとんど無く、メリットデメリットが例示付きでとにかく浅く広く解説されている。\n私的には聞いたことはあるけど使ったこと無いモデルとか、まるで聞いたことないモデルまで、様々なモデルの存在を知ることができ、本当に買って良かったと思う。\n星5にならなかった理由だが、これはおそらく自分の性格の問題だ。本当に全てが浅く紹介されているだけなので、それぞれのモデルについて深く知りたいなら別の参考書をあたる必要がある。その「なんとなく分かった気になっておいて、とりあえず前に進む」というのが最初のうちはなかなか出来なかったので、全然読み進められなかった。。 しかし、適宜たくさんの参考書が筆者により紹介されているし、たしかに一部の参考書を引いてみるととても分かりやすかった。\nこの一冊で数理モデルを扱えるようになるわけでは無いが、この一冊から入門し、全体を俯瞰したのちに細かい分野を別の参考書で補う勉強スタイルが非常に効率的かも。\n分析者のためのデータ解釈学入門　データの本質をとらえる技術[ 江崎貴裕 ] ⭐⭐⭐⭐⭐(星5)\nリンク\nこれも前述と同じ江崎先生による書籍で、ソシムデータ分析シリーズの二作目。\n正直この本は傑作級に素晴らしい。これまでに読んだ1どの統計書よりも分かりやすく、かつ網羅的に「統計学を使う上での注意点」が網羅されている。仮説検定法に潜む問題や機械学習における過学習の問題など有名どころはもちろん、サンプルサイズと効果量の話とか、様々なバイアスの話とか、、、学生の時に習った(であろう)重要ポイントがくまなく言及されている。\n会社の人たちに「黙ってこれ読んでから質問してくれ」と言いたいレベルで、本書の内容はデータ分析に携わる人なら必ず知っておくべき内容ばかりが詰まってる。\n「数理モデル」と同様、本書にも数式はほぼ登場しないが、前書よりも一つ一つのイシューに対する説明がより丁寧になっている。「数理モデル」は一通りサーっと読み通してから、引っかかる部分があれば追加で勉強、というスタイルだが、本書はこの一冊をとにかくじっくり熟読すれば様々なバイアスの存在・問題点を学ぶことが出来る。\nニーチェが京都にやってきて17歳の私に哲学のこと教えてくれた。[ 原田まりる ] リンク\n⭐⭐⭐(星3)\nこれは期待してなかったけど、意外になかなか面白かった本。\nKindleのまとめ買いセール[^2]の数合わせで購入。「若者ウケを狙った寒いなりきりラノベかなぁ\u0026hellip;」と思いきやちょっと違った。\nストーリーはこうだ。失恋をした女子高生のもとへ転生したニーチェがやってきて、「祝福できないくらいならいっそ呪ってしまえ」と言いながら彼女に哲学を説く。\nその後キルケゴールやサルトルといった歴史上の哲学者もニーチェと同じように転生者として登場し、それぞれの哲学を彼女に説く。様々な哲学の考え方を知るに従い、失恋や自身の親との関係などで抱えていたもやもやしたものに気持ちの区切りを付けることができるようになり、成長していくという話。\nはじめはなろう系の異世界転生のような月並みのストーリーとして読んでいたのだが、読み始めてすぐその間違いに気がつく。この本は小説として読むのではなく、会話形式でそれぞれの哲学者の考えを子供にも分かるように説明した極めて平易な哲学書と解釈するのが正しいのだ。そう考えると極めて読みやすく、分かりやすい。というか哲学書はこうやって説明してくれればいいんだ、とはっとした。\nAmazonレビューは星4.5と比較的高いが、皆ストーリーを面白いと言っているわけではないので私と同じ感想なんだと思う。\n「子供にも分かるように」とは言ったが、正直高校生には難しいかも。人生経験的に共感できるポイントが少なそう。社会人なら共感ポイントが多く、むしろ救われる気持ちにすらなるかもしれないと思う。\nガジェット 実は自分、結構ガジェット好きです。結構ガジェット系youtuberの動画をずっと見ちゃう。\nKeychron K2 non-backlight red リンク\n🌟🌟🌟(星3兆個)\nKeychronは香港のメーカーで、アメリカのキーボード大好きyoutuberにも人気があるらしい。\nきっかけはtakuyaさんのNeovim動画で、むっちゃかっけぇと思ったとき。\n調べてみたら100ドルを切る値段でありながら、HHKBなどの超高級キーボード並に打鍵感が良いらしいとのこと。\nkeychronというメーカーを調べてみると、主にキー数の違いによって様々なバージョンのキーボードがあるらしい。詳しい違いについてはやまかふぇさんの動画が詳しい。 見比べた中では最初に見たkeychron \u0026ldquo;K2\u0026quot;が一番良く、カーソルキーやInsキーがうまいこと収まっているところに惚れた。 通常版でも良かったが、別にキーボードが光る必要は無いと思ってる人なのでnon-backlightにした。\n意外とネット通販でも通常価格で販売されていて、在庫さえあればどこでも買えそう。しかし、謎のkyochron.jpという公式っぽいサイトを見つけたので、ここで買ってみた。\nこのサイトで購入した人がほぼ見当たらず、しかも謎に通常販売価格より1000円以上安く(自分が購入したときは9300円、現在は10400円)、発送も香港からということで不安しかなかった。 怖かったのでPaypalで購入し、メールアドレスも捨てアドで登録。6-9日くらいは到着に要すると書いてあったが10日立っても届かず、不安しかなかった(チャットサポートも不通)。 が、結局11日目で佐川急便到着。疑ってすまなかった。。\n感想は最高。打鍵感が本当に気持ちいい。高級キーボードの「スコスコ感」ってこれかぁ。\nHHKBなら最低でも3万円くらいは積まないといけないが、keychronは1万円で入門できて非常にお手軽。おすすめ。\nなお気に入りすぎて純正パームレストも購入した。(これは楽天スーパーセール時にヤマダだかコジマだかのショップにて購入)\nhttps://t.co/7pes6LbZAF なるサイトがhttps://t.co/e2x0hPlcSj や店頭価格よりも安いもんだから詐欺サイトかと疑ってしまいましたが、ちゃんと届きました😇\nkeychron K2 … うっとりする美しさ… pic.twitter.com/YMe5xVnMVK\n\u0026mdash; スニッチ (@excel2rlang) September 10, 2022 ぶっちゃけ統計学勉強中なので5冊も読んでないけど･･･\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2022-09-19T00:00:00Z","permalink":"https://snitch0.github.io/p/items-22-09/","title":"最近買ったもの(2022-9月)"},{"content":"pythonライブラリの使い方が分からなくなることがある pythonライブラリにはド定番のライブラリがいくつもあるが、それらの仕様は結構忘れがち。\nたとえばcsvのDictWriterクラス。引数がファイルオブジェクトなのかそれともパスを文字列で与えるのか、刹那の思考をはさんだ後にwith open()などと書き始める。\ncsv.DictWriterクラスならまだ良いが、やり方が複数通り存在する場合になるともうカオスだ。urllib.requestとrequestsのどっち使うんだとか、はたまたurllib3はなんなんだとか。。そんな「結局何が正解なん」案件でsubprocessの使い方についてちょっと思うところがあった。\nsubprocessライブラリの使い方 色々やりたいときはPopenクラスを使う、簡単なユーズケースならrunメソッドを使う、という認識でいたので、基本的に何も考えずPopenクラスを毎回使っていた。\nこんな感じ。\n1from subprocess import Popen 2 3ps = Popen([\u0026#39;ls\u0026#39;, \u0026#39;-lah\u0026#39;]) 4ps.wait() Popen.wait()するタイミングをずらすことで非同期処理的にマルチプロセス化することもあるため、個人的にはシェルスクリプトとしてpythonを使う際には欠かせないやつ🤔\nstdoutを使おうとするとちょい面倒 標準出力を取得しようとするとsubprocess.PIPEが必要になるのでちょいめんどくさい。バイト文字列で選ってくるところがなおさら😅\n1from subprocess import Popen, PIPE 2 3ps = Popen([\u0026#39;echo\u0026#39;, \u0026#39;hello\u0026#39;], stdout=PIPE) 4s_out = ps.stdout.readlines() 5print([s.decode(\u0026#34;utf-8\u0026#34;) for s in s_out]) ['hello\\n'] ググったらsubprocess.runの方が楽らしいと知る こちらのQiita記事を拝読すると、「suborocess.runを使うのが良いとされている」とか「capture_outputを使ってもできる」というのを聞いて👀から🐟!\n1import subprocess 2 3ps = subprocess.run([\u0026#39;echo\u0026#39;, \u0026#39;hello\u0026#39;], capture_output=True, text=True) 4s_out = ps.stdout 5print(s_out) hello \u0026ndash;はぁ･･･勉強不足でした。。すみません。。と思いつつdocumentを見ると確かに以下のようにrunメソッドが推奨されていた。1\nサブプロセスを起動するために推奨される方法は、すべての用法を扱える run() 関数を使用することです。より高度な用法では下層の Popen インターフェースを直接使用することもできます。\nまた、capture_outputオプションはpython3.7で実装されたらしい。なるほど比較的新しいけど、少なくともセキュリティサポートされているバージョンをきちんと追ってる人なら間違えてはいけないポイントだろう。\nみんなちゃんと情報フォローしてるのか?と気になって調べてみた 結論、Qiita記事はちょっと危険だなと思った。自分も似たようなものだが･･･\nやばいパターン①推奨されていない書き方を解説している shell=Trueを使えば簡単にパイプが使えるので、便利なことは便利。しかし、任意のコードを実行させられる可能性があるので、ウェブフレームワークなどで使うのは御法度というのが有名。 これを説明せずに「shell=Trueの方が初心者にはオススメ」などと平然と書かれているケースがあった。\nちょっと気になったパターン②capture_outputオプションの言及がない 先に言っておくが、個人ブログは高確率でこれに言及している。最初の投稿時に言及が無くとも、ほぼ全員が追記していた。すごい😲きっと多分自分のコンテンツに責任を持っているのだろう。自分もそうならねば。\nPopen.PIPEの方法はQiita記事だけをみていたらゴールドスタンダードに見えるだろう。現に自分がそうだった。\nやっぱ、公式ドキュメントはちゃんと読んだ方が良いわ 正直自分はpythonドキュメントきちんと読んでこなかった。だってフォントとかレイアウトとかのせいか、読みにくいんだもん。\nしかし、細かい推奨レベルや後で追加されたオプションなど、知らないと恥かく内容も多いと感じた。\nコツコツpythonドキュメントをちゃんと読み直してみるのもいい学習方法かもしれない。\nこれを推奨ととるかは読解力次第な気もする\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2022-09-12T00:00:00Z","permalink":"https://snitch0.github.io/p/python-subprocess/","title":"subprocessライブラリの使い方って結局何が正解なん"},{"content":"Headings 一般的なmarkdownと同様、\u0026lt;h1\u0026gt;-\u0026lt;h6\u0026gt;タグに変換される。\nh1 h2 h3 h4 h5 h6 Paragraph Sudden looked elinor off gay estate nor silent. Son read such next see the rest two. Was use extent old entire sussex. Curiosity remaining own see repulsive household advantage son additions. Supposing exquisite daughters eagerness why repulsive for. Praise turned it lovers be warmly by. Little do it eldest former be if.\nRandom TextGenerator\n私は多年どうしても同じ存在めとして事の時の当てるなう。よし次第が納得めはよほど大きな失敗たたかもがさてならたがも経過いうたましょから、全くにも思わたたないたら。本領をいうですのももっとも前に何だかだませう。いったい嘉納さんを標榜書生ますます推察をすみた一口いわゆる主義何か活動にというお仕事たましででしょたって、いわゆる十月はそれかがた学校よりしで、岡田さんの訳が人の私がやはりお入会と致さけれども私肴がご講演としようについに不反対がつけですでて、ちっとも正しく意味をいううてならまいので掘りでで。つまりそうしてご鶴嘴を待っ気もたった公平ときまったて、そのらとはありありからという時分より云っばいますう。\nすぐ使えるダミーテキスト\nBack quote Backquotesはquartoの特性というよりは、hugoのテーマ次第なところが大きい。\nBackquote without attribution Be yourself;everyone else is already taken. ― Oscar Wilde\nBackquote with attribution Two things are infinite: the universe and human stupidity; and I\u0026rsquo;m not sure about the universe.\nAlbert Einstein1\nTables Col1 Col2 Tom 24 Clara 34 Italics Bold Code italics bold code Code block quartoの実行結果がネイティブに動くのは素晴らしいなあ。\ncodeタグのcssは改良の余地がありそう。\nMarkdown simple code block 1library(dplyr) 2 3mtcars |\u0026gt; 4 group_by(cyl) |\u0026gt; 5 summarise(mean(mpg)) Hugo hilighting shortcode Hugoのショートコードはquartoのレンダリング時に若干崩壊するようだ。\n1 1\u0026lt;!doctype html\u0026gt; 2\u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; 3\u0026lt;head\u0026gt; 4 \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; 5 \u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; 6\u0026lt;/head\u0026gt; 7\u0026lt;body\u0026gt; 8 \u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; 9\u0026lt;/body\u0026gt; 10\u0026lt;/html\u0026gt; 1\\\u0026lt;!doctype html\\\u0026gt; 2\u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; 3\u0026lt;head\u0026gt; 4\u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; 5\u0026lt;title\u0026gt; 6Example HTML5 Document 7\u0026lt;/title\u0026gt; 8\u0026lt;/head\u0026gt; 9\u0026lt;body\u0026gt; 10\u0026lt;p\u0026gt; 11Test 12\u0026lt;/p\u0026gt; 13\u0026lt;/body\u0026gt; 14\u0026lt;/html\u0026gt; Quarto code chunk 1library(dplyr) 次のパッケージを付け加えます: 'dplyr' 以下のオブジェクトは 'package:stats' からマスクされています: filter, lag 以下のオブジェクトは 'package:base' からマスクされています: intersect, setdiff, setequal, union 1mtcars |\u0026gt; 2 group_by(cyl) |\u0026gt; 3 4summarise(mean(mpg)) # A tibble: 3 × 2 cyl `mean(mpg)` \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; 1 4 26.7 2 6 19.7 3 8 15.1 Quarto code chunk with plot 1pacman::p_load(ggplot2) 2 3mtcars |\u0026gt; 4 ggplot(aes(x = mpg, y = hp, col = cyl)) + 5 geom_point() 1import seaborn.objects as so 2from palmerpenguins import load_penguins 3 4penguins = load_penguins() 5 6( 7 so.Plot(penguins, x=\u0026#34;bill_length_mm\u0026#34;, y=\u0026#34;bill_depth_mm\u0026#34;) 8 .add(so.Dot()) 9 .show() 10) Diff 1[dependencies.bevy] 2git = \u0026#34;https://github.com/bevyengine/bevy\u0026#34; 3rev = \u0026#34;11f52b8c72fc3a568e8bb4a4cd1f3eb025ac2e13\u0026#34; 4- features = [\u0026#34;dynamic\u0026#34;] 5+ features = [\u0026#34;jpeg\u0026#34;, \u0026#34;dynamic\u0026#34;] List Types Ordered List First item Second item Third item Unordered List List item Another item And another item Nested list Fruit Apple Orange Banana Dairy Milk Cheese Other Elements \u0026mdash; abbr, sub, sup, kbd, mark 1\u0026lt;abbr title=\u0026#34;Graphics Interchange Format\u0026#34;\u0026gt;GIF\u0026lt;/abbr\u0026gt; is a bitmap image format. 2 3H\u0026lt;sub\u0026gt;2\u0026lt;/sub\u0026gt;O 4 5X\u0026lt;sup\u0026gt;n\u0026lt;/sup\u0026gt; + Y\u0026lt;sup\u0026gt;n\u0026lt;/sup\u0026gt; = Z\u0026lt;sup\u0026gt;n\u0026lt;/sup\u0026gt; 6 7Press \u0026lt;kbd\u0026gt;\u0026lt;kbd\u0026gt;CTRL\u0026lt;/kbd\u0026gt;+\u0026lt;kbd\u0026gt;ALT\u0026lt;/kbd\u0026gt;+\u0026lt;kbd\u0026gt;Delete\u0026lt;/kbd\u0026gt;\u0026lt;/kbd\u0026gt; to end the session. 8 9Most \u0026lt;mark\u0026gt;salamanders\u0026lt;/mark\u0026gt; are nocturnal, and hunt for insects, worms, and other small creatures. GIF is a bitmap image format.\nH2O\nXn + Yn = Zn\nPress CTRL+ALT+Delete to end the session.\nMost salamanders are nocturnal, and hunt for insects, worms, and other small creatures.\nHyperlinked image Google\nRich-content Shortcodeにdouble-quotationが含まれていると、rendering時にsmart-quoteに変換されてしまう仕様らしい。 これはシンタックスエラーの引き金となってhugoがレンダリングに失敗してしまうので、現状主導でmarkdownファイルを修正してやる必要がある。Issueあげようかと思ったら既に修正に取り組んでくれているみたいだった。今後に期待。\nQuote Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n― A famous person, The book they wrote youtube アルバート・アインシュタイン\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2022-09-11T00:00:00Z","permalink":"https://snitch0.github.io/p/blog-syntax/","title":"Quarto(とHugo)のSyntax"},{"content":"QuartoにおけるPythonの仕様 Quartoは以下のようにRでもPythonでも一つのファイルでレンダリングできるのが素晴らしい✨\nしかし、Python単独なら特に難しいことは無いが、RとPythonが共存するとある問題が生じる。\n1result = lm(data = iris, Sepal.Width ~ Sepal.Length) 2summary(result) Call: lm(formula = Sepal.Width ~ Sepal.Length, data = iris) Residuals: Min 1Q Median 3Q Max -1.1095 -0.2454 -0.0167 0.2763 1.3338 Coefficients: Estimate Std. Error t value Pr(\u0026gt;|t|) (Intercept) 3.41895 0.25356 13.48 \u0026lt;2e-16 *** Sepal.Length -0.06188 0.04297 -1.44 0.152 --- Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 Residual standard error: 0.4343 on 148 degrees of freedom Multiple R-squared: 0.01382, Adjusted R-squared: 0.007159 F-statistic: 2.074 on 1 and 148 DF, p-value: 0.1519 1from sklearn.datasets import load_iris 2from sklearn import linear_model 3import pandas as pd 4 5iris = load_iris() 6df = pd.DataFrame(iris.data, columns = [\u0026#39;SepalLength\u0026#39;, \u0026#39;SepalWidth\u0026#39;, \u0026#39;PetalLength\u0026#39;, \u0026#39;PetalWidth\u0026#39;]) 7 8df[\u0026#34;Name\u0026#34;] = pd.Series(iris.target) 9 10model = linear_model.LinearRegression() 11ft = model.fit(df[[\u0026#34;SepalLength\u0026#34;]], df[[\u0026#34;SepalWidth\u0026#34;]]) 12print(f\u0026#34;Intercept: {ft.intercept_[0]:.6}, Coef: {ft.coef_[0][0]:.6}\u0026#34;) Intercept: 3.41895, Coef: -0.0618848 エンジンにjupyterを使う場合 Pythonを使うなら、おそらくこれが一番明快でおすすめの方法になる。\nqmdのyamlヘッダにてengine: jupyterを選択しておく方法。たとえば、以下のようにする。\n1title: \u0026#34;QuartoでPythonを使うときの注意とか\u0026#34; 2description: 意外と複雑な仕様?😈 3author: Snitch 4date: \u0026#34;2022-09-11\u0026#34; 5categories: 6 - Quarto 7 - R 8 - Python 9 - Reticulate 10 - Linux 11tags: 12 - quarto 13 - R 14 - Python 15format: hugo 16slug: \u0026#34;python-and-quarto\u0026#34; 17jupyter: python3 18html-math-method: webtex 一部はhugo関係のものもあるが、jupyterやhtml-math-method の部分はquartoに由来する。(いずれこのヘッダオプションも研究しなければ・・・)\n要はjupyterのpython3カーネルを使っているというだけなので、bashカーネルだってRカーネルだって存在さえしてれば使えるということなのだろう。\nこのオプションを指定している間に起こる諸問題1はjupyter由来のものになると思われるので、対処はしやすそう。しかしipywidgetなどはhugoへのレンダリングは厳しそう。qmdではなくipynbからやる方が無難だろう。\nしかし、このjupyterカーネルでは単一のカーネルしか指定できないので、RとPythonの共存は不可能である･･･。\nエンジンにjupyterを使用しない場合 jupyterを指定しない場合はpythonセルがreticulate+knitr経由で実行される。PythonとR両方を使ったドキュメントを気軽に書くことが出来るのはreticulate様のおかげだったのだ。万歳。\nしかし、reticulateは親切なんだかお節介なんだか分からないが、python実行バイナリのパス指定方法が複数あるせいで設定変更が一発で効かないことがしばしばあり、個人的にそれがreticulateを使う気にならない理由の一つ🐍2\nそして、reticulateの設定で見事にハマった。\n備忘録も兼ねてこのハマりポイント2つを残しておきたいと思う。\nreticulateのハマりポイント 仮想環境には気をつける 自分は普段pyenvとmambaforgeの二つを主なpythonソースとして使っている。前者は汎用的なコーディング(シェルスクリプト作成など)用で、後者はガッツリバイオインフォ解析する時用で使い分けている。\n今回何も考えずに実行しようとしたら、pyenvがうまく認識されてくれなかった。\n調べてみたところ、shared libraryを作らないpyenvはそれを必須とするreticulateと相性が悪いらしい。このページに書かれた手順を試してはみたが、やはり同じエラーが出るだけだった。\n諦めてmambaforgeに専用の仮想環境を用意してやったところ、うまく動作した。\n1mamba create -n pyr python=3.10 RETICULATE_PYTHON環境変数に注意する 要はこの変数に適切なパスが通っていれば問題ないが、環境変数であるせいか、セッションステータスによっては反映されたりされなかったりするのが面倒だった。\nネットを見ると色々と対処方法が書いてあり、use_conda()を使うだとか、use_python()を使うとかの情報があるが、``./Renviron`に変数を記入してやるのが一番問題が起きにくかった。根拠が曖昧な経験則でアレだが、reticulateはこういう「なんでうまく行ったのがが分からない」ケースがちょいちょいある。\n.Renviron 1RETICULATE_PYTHON=\u0026#34;~/mambaforge/envs/pyr/bin/python\u0026#34; 他にも.RprofileにSys.setenv(RETICULATE_PYTHON=)などと定義してやる方法もあるらしいが、なんとなくOS側で定義されていた方が安心な気がする。\nmatplotlibのplot inlineとか。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nならRstudio使いなさいよみたいな声が聞こえてきそうだが、Rstudioでpythonコーディングは結構キツい。pythonコーディングはVSCodeやPyCharmの方が圧倒的に優れており、めいっぱいPython書く人ならこれに同意してくれると思う。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2022-09-11T00:00:00Z","permalink":"https://snitch0.github.io/p/python-and-quarto/","title":"QuartoでPythonを使うときの注意とか"},{"content":"動機 私はexcel2rlang.comというRプログラミング解説ブログを管理しているヒトです。猫の名前をお借りして、スニッチという名前でやっています🐈‍⬛\nメインブログではR関連でまとまった内容を時間をかけて推敲しながら作っていく方針だったのですが、Rとは関係の無い話や、ライトな話題を吐き出しにくいことや、Wordpressとphpというフレームワークが気に入らないことなどの不満を常に抱えていました。\nあと、二ヶ月位前に「スニッチさんのブログ、読み込み遅いですね」と言われてピキったのもモチベの一つですね\u0026hellip;😓\nそんな折、quartoがアツいぞという話をあっちこっちで聞くようになってきて、このトレンドには乗っておこうかなという軽い気持ちでquartoを使ったブログを作ってみることにしました。\nHugo and Quarto Quartoのdocumentationをよくよく読んだらHugoへのレンダリングが可能ということだったので、Hugoでブログを作ってみることにしました。\n調べてみたところ、{blogdown}パッケージを通じてhugoのレンダリングの持ち込む方法をとっている人は見かけるものの、Hugo themeを選ばずにquartoを使ったブログの作り方を解説している人は見つかりませんでした。\nこのブログでのquartoブログの作り方解説が誰かのためになれば嬉しいし、まとまった内容になったらメインブログの方に再編してアップしても良いかなと思います。\nこれからいっぱい書くぞー って最初は誰でも意気込みますが、軽い内容のエントリを量産していこうと思います🖐️\n","date":"2022-09-10T00:00:00Z","permalink":"https://snitch0.github.io/p/first-post/","title":"Quartoを使った2ndブログを作ってみた"}]